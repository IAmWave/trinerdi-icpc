\newbox\spacebox % Used to meaśure character width

\advance\hoffset by -25pt
\advance\hsize by 25pt
\advance\voffset by -5pt
\advance\vsize by 80pt

\def\dofont#1, #2!{"#1" at #2\relax}
\def\monofont{\dofont Liberation Mono}
\def\seriffont{\dofont Liberation Serif}

\newdimen\fontsize
\fontsize=7.5pt
\font\headlinefont=\seriffont, 10pt!
\font\rm=\monofont, \fontsize!
\font\bf=\monofont/B, \fontsize!
\font\it=\monofont/I, \fontsize!
\font\headerfont=\monofont, 11pt!
\rm

\def\makeprintable{%
	\def\do##1{\catcode`##1=12}
	\dospecials
	\catcode`\\=0
	\catcode`\{=1
	\catcode`\}=2
	\gdef\{{\char123\relax}
	\gdef\}{\char125\relax}
	\gdef\b##1##2{\char92\relax##2} % Backspace
}

\parindent=0pt
\def\setverb{%
	\def\par{\leavevmode\endgraf} % Allow blank lines
	%
	% Allow long lines to break, let them have less \baselineskip, indent line
	% continuations
	\baselineskip=1.1\fontsize\relax
	\parskip=1pt plus .1pt minus .1pt
	\rightskip=0pt plus 1fill
	\leftskip=100pt
	\parindent=-\leftskip
	%
	\setspace
	\obeyspaces\obeylines
}

{%
 \catcode`\^^I=13\catcode`\ =13
 \gdef\setspace{%
  \catcode`\^^I=13\catcode`\ =13
  \setbox\spacebox=\hbox{a}%
  \def {\hskip\wd\spacebox\relax}%
  \def^^I{    }%
 }%
}


\def\verb{%
	\bgroup
	\setverb
}

% \col{rgb color}{font}{content}
\def\col#1#2#3{%
	{%
	\special{color push rgb #1}%
	#2%
	#3%
	\special{color pop}%
	}%
}

% Blank lines: we want to encourage page breaks here
\def\sk{\penalty -500} % regular
\def\greatsk{\penalty -3000} % after a function definition (after non-indented "}")

\def\typ{\col{0 0 .5}\bf}
\def\com{\col{.3 .3 .3}\it}
\def\str{\col{0 .7 0}\rm}
\def\dir{\col{.5 0 0}\it}
\def\key{\col{0 0 0}\bf}
\def\con{\col{.8 .1 .2}\rm}
\def\tem{\col{.0 .2 .8}\bf}

\footline={}
\headline={%
	\vbox{%
		\vskip -5pt

		\headlinefont
		\special{color push rgb 0 0 0}%
		Tři nerdi – notebook
		\hskip 0pt plus 1filll
		\the\pageno
		\special{color pop}%
		%
		\vskip 3pt
		\hrule height .5pt
	}%
}

\def\header#1{%
	{%
	\headerfont
	\vskip 15pt plus 3pt minus 8pt
	\penalty -5000
	#1
	\endgraf
	\penalty 5000
	}%
}

\makeprintable
