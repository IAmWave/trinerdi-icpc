\newbox\spacebox % Used to meaśure character width

\advance\hoffset by -15pt
\advance\hsize by 15pt
\advance\voffset by -15pt
\advance\vsize by 60pt

\def\dofont#1, #2!{"#1" at #2\relax}
\def\monofont{\dofont Liberation Mono}
\def\seriffont{\dofont Liberation Serif}

\newdimen\fontsize
\fontsize=9pt
\font\footlinefont=\monofont, 12pt!
\font\rm=\monofont, \fontsize!
\font\bf=\monofont/B, \fontsize!
\font\it=\monofont/I, \fontsize!
\font\headerfont=\monofont, 16pt!
\rm

\parindent=0pt
\def\setverb{%
	\def\do##1{\catcode`##1=12}
	\dospecials
	\catcode`\\=0
	\catcode`\{=1
	\catcode`\}=2
	\gdef\{{\char123\relax}
	\gdef\}{\char125\relax}
	\gdef\b{\char92\relax} % Backspace
	%
	\def\par{\leavevmode\endgraf} % Allow blank lines
	%
	% Allow long lines to break, let them have less \baselineskip, indent line
	% continuations
	\baselineskip=1.1\fontsize\relax
	\parskip=1pt plus .1pt minus .1pt
	\rightskip=0pt plus 1fill
	\leftskip=100pt
	\parindent=-\leftskip
	%
	\setspace
	\obeyspaces\obeylines
}

{%
 \catcode`\^^I=13\catcode`\ =13
 \gdef\setspace{%
  \catcode`\^^I=13\catcode`\ =13
  \setbox\spacebox=\hbox{a}%
  \def {\hskip\wd\spacebox\relax}%
  \def^^I{    }%
 }%
}


\def\verb{%
	\bgroup
	\setverb
}

% \col{rgb color}{font}{content}
\def\col#1#2#3{%
	{%
	\special{color push rgb #1}%
	#2%
	#3%
	\special{color pop}%
	}%
}

% Blank lines: we want to encourage page breaks here
\def\sk{\penalty -1000} % regular
\def\greatsk{\penalty -7000} % after a function definition (after non-indented "}")

\def\typ{\col{0 0 .6}\bf}
\def\com{\col{.3 .3 .3}\it}
\def\str{\col{0 .7 0}\rm}
\def\dir{\col{.5 0 0}\it}
\def\key{\col{0 0 0}\bf}
\def\con{\col{.8 .1 .2}\rm}

\footline={%
	\vbox{%
		\vskip 10pt
		\hrule height .5pt
		\vskip 5pt
		%
		\footlinefont
		\special{color push rgb 0 0 0}%
		Tři nerdi – notebook
		\hskip 0pt plus 1filll
		\the\pageno
		\special{color pop}%
	}%
}

\def\header#1{%
	{%
	\headerfont
	\vskip 20pt plus 5pt minus 10pt
	\penalty -9000
	#1
	\endgraf
	\penalty 9000
	}%
}
